var GameDataPDK=GameDataPDK||{};function pokerPDKRegistMsg(){GameNet.getInstance().setCallBack("pdk-hideCard",function(a){WriteLog("pdk-hideCard: ",a),GameDataPDK.hideDisCard=a,sendEvent("pdk-hideCard",a)}),GameNet.getInstance().setCallBack("pdk-onReady",function(a){WriteLog("pdk-onReady: ",a),sendEvent("pdk-onReady",a)}),GameNet.getInstance().setCallBack("pdk-startChuai",function(a){WriteLog("do event pdk-startChuai  "+JSON.stringify(a)),GameDataPDK.chuaiFlag=!0,sendEvent("pdk-startChuai",a)}),GameNet.getInstance().setCallBack("pdk-startTi",function(a){WriteLog("do event pdk-startTi  "+JSON.stringify(a)),GameDataPDK.tiFlag=!0,sendEvent("pdk-startTi",a)}),GameNet.getInstance().setCallBack("pdk-showKicking",function(a){WriteLog("do event pdk-showKicking  "+JSON.stringify(a)),GameDataPDK.kicking=a,sendEvent("pdk-showKicking",a)}),GameNet.getInstance().setCallBack("pdk-onGameInfo",function(a){WriteLog("do event pdk-onGameInfo  "+JSON.stringify(a)),GameDataPDK.game.initcards=!0,GameDataPDK.deal=!1,sendEvent("pdk-onGameInfo",a)}),GameNet.getInstance().setCallBack("pdk-initCardHandNum",function(a){WriteLog("do event pdk-initCardHandNum  "+JSON.stringify(a)),GameDataPDK.cards[a.uid]=void 0===GameDataPDK.cards[a.uid]?{}:GameDataPDK.cards[a.uid],GameDataPDK.cards[a.uid].handnum=a.num,sendEvent("pdk-initCardHandNum")}),GameNet.getInstance().setCallBack("pdk-initCardHand",function(a){WriteLog("do event pdk-initCardHand  "+JSON.stringify(a)),GameDataPDK.cards[a.uid]=void 0===GameDataPDK.cards[a.uid]?{}:GameDataPDK.cards[a.uid],GameDataPDK.cards[a.uid].hand=a.hand,sendEvent("pdk-initCardHand")}),GameNet.getInstance().setCallBack("pdk-onGameStart",function(a){WriteLog("do event pdk-onGameStart  "+JSON.stringify(a)),GameDataPDK.initGameData(),GameDataPDK.game.gameStart=!0,GameDataPDK.deal=!0,sendEvent("pdk-onGameStart")}),GameNet.getInstance().setCallBack("pdk-onGameScore",function(a){WriteLog("do event pdk-onGameScore  "+JSON.stringify(a)),GameDataPDK.resultData=a,GameDataPDK.game.gameStart=!1,GameDataPDK.tiFlag=!1,GameDataPDK.chuaiFlag=!1,sendEvent("pdk-onGameScore",a)}),GameNet.getInstance().setCallBack("pdk-onGameAllScore",function(a){WriteLog("do event pdk-onGameAllScore  "+JSON.stringify(a)),GameDataPDK.allScores=a.score,GameDataPDK.roomsummaryData=a,sendEvent("pdk-onGameAllScore",a)}),GameNet.getInstance().setCallBack("pdk-onFirstJiaoFen",function(a){WriteLog("sercerMsg  pdk-onFirstJiaoFen :"+JSON.stringify(a)),GameDataPDK.game.isJiaofenAgain=a.flag,GameDataPDK.currJiaofenPlayerData=a,sendEvent("pdk-onJiaoFen",a)}),GameNet.getInstance().setCallBack("pdk-showWatch",function(a){WriteLog("sercerMsg  pdk-showWatch :"+JSON.stringify(a)),GameDataPDK.currtiChuaiPlayerData=a,sendEvent("pdk-showWatch",a)}),GameNet.getInstance().setCallBack("pdk-nextJiaoFen",function(a){for(var e in WriteLog("sercerMsg  pdk-nextJiaoFen :"+JSON.stringify(a)),a.allJiaoFen)GameDataPDK.cards[e].jiaofenNum=a.allJiaoFen[e];GameDataPDK.currJiaofenPlayerData=a,sendEvent("pdk-onJiaoFen",a)}),GameNet.getInstance().setCallBack("pdk-reconnectionInfo",function(a){if(WriteLog("sercerMsg  pdk-reconnectionInfo :"+JSON.stringify(a)),"jiaofen"==a.type)for(var e in(GameDataPDK.currJiaofenPlayerData=a).allJiaoFen)GameDataPDK.cards[e].jiaofenNum=a.allJiaoFen[e];sendEvent("pdk-reconnectionInfo")}),GameNet.getInstance().setCallBack("pdk-openScore",function(a){WriteLog("do event pdk-openScore  "+JSON.stringify(a)),GameDataPDK.openScore=a.open,sendEvent("pdk-openScore",a)}),GameNet.getInstance().setCallBack("pdk-onZhuang",function(a){WriteLog("sercerMsg  pdk-onZhuang  :"+JSON.stringify(a)),GameDataPDK.game.zhuangUid=a.zhuang,GameDataPDK.gameStartData=a,GameDataPDK.game.gameStartZhuang=!0,sendEvent("pdk-onZhuang",a)}),GameNet.getInstance().setCallBack("pdk-disCardUid",function(a){WriteLog("sercerMsg  pdk-disCardUid  :"+JSON.stringify(a)),GameDataPDK.currObtainPlayerData=a,sendEvent("pdk-onShowObtainNode",a)}),GameNet.getInstance().setCallBack("pdk-initCardHandNums",function(a){WriteLog("do event pdk-initCardHandNums  "+JSON.stringify(a)),GameDataPDK.cards[a.uid].handnum=a.num,cc.log("initCardHandNums"+JSON.stringify(GameDataPDK.cards[a.uid])),sendEvent("pdk-initCardHandNums")}),GameNet.getInstance().setCallBack("pdk-showDisPoker",function(a){WriteLog("sercerMsg  pdk-showDisPoker  :"+JSON.stringify(a)),GameDataPDK.cards[a.uid]=void 0===GameDataPDK.cards[a.uid]?{}:GameDataPDK.cards[a.uid],GameDataPDK.cards[a.uid].discards=a.cards,GameDataPDK.connectDisCard[a.uid]=a.cards,GameDataPDK.boomNum=a.boomNum,sendEvent("pdk-showDisPoker",a)}),GameNet.getInstance().setCallBack("pdk-initCardHands",function(a){WriteLog("do event pdk-initCardHands  "+JSON.stringify(a)),GameDataPDK.cards[a.uid]=void 0===GameDataPDK.cards[a.uid]?{}:GameDataPDK.cards[a.uid],GameDataPDK.cards[a.uid].hand=a.hand,sendEvent("pdk-initCardHands",a)}),GameNet.getInstance().setCallBack("pdk-cardWarning",function(a){WriteLog("do event pdk-cardWarning  "+JSON.stringify(a)),sendEvent("pdk-cardWarning",a)}),GameNet.getInstance().setCallBack("pdk-onDiscardType",function(a){WriteLog("do event pdk-onDiscardType  "+JSON.stringify(a)),GameDataPDK.lastDisPokerUid=a.uid,sendEvent("pdk-onDiscardType",a)}),GameNet.getInstance().setCallBack("pdk-jiaoFencb",function(a){WriteLog("do event pdk-jiaoFencb  "+JSON.stringify(a)),sendEvent("pdk-jiaoFencb",a)}),GameNet.getInstance().setCallBack("pdk-passcb",function(a){WriteLog("do event pdk-passcb  "+JSON.stringify(a)),GameDataPDK.cards[a.uid].discards=a.cards,GameDataPDK.cards[a.nextUid].discards=a.nextCards,sendEvent("pdk-passcb",a)}),GameNet.getInstance().setCallBack("pdk-hintCard",function(a){WriteLog("do event pdk-hintCard  "+JSON.stringify(a)),sendEvent("pdk-hintCard",a)}),GameNet.getInstance().setCallBack("pdk-BackTable",function(a){WriteLog("do event pdk-BackTable  "+JSON.stringify(a)),GameDataPDK.game.initcards=!0})}GameDataPDK.init=function(){GameDataPDK.initCreateRoomOpts(),GameDataPDK.initRoomData(),pokerPDKRegistMsg()},GameDataPDK.initRoomData=function(){GameDataPDK.log="",GameDataPDK.room={},GameDataPDK.allScores={},GameDataPDK.roomsummaryData={},GameDataPDK.openScore=0,GameDataPDK.recordInfo=[],GameDataPDK.currJiaofenPlayerData={},GameDataPDK.gameStartData={},GameDataPDK.currObtainPlayerData={},GameDataPDK.lastDisPokerUid=0,GameDataPDK.hideDisCard={},GameDataPDK.deal=!1,GameDataPDK.tiFlag=!1,GameDataPDK.chuaiFlag=!1,GameDataPDK.kicking={},GameDataPDK.currtiChuaiPlayerData=[],GameDataPDK.connectDisCard={},GameDataPDK.boomNum=0,GameDataPDK.initGameData()},GameDataPDK.initGameData=function(){GameDataPDK.handCardSize=16,GameDataPDK.handCardSizeMax=16,GameDataPDK.game={roundType:0,roundNum:0,roundmax:0,turn:0,lastdisUid:0,lastdisCard:0,winnerUid:0,zhuangUid:0,gangOver:0,gameStart:!1,gameStartZhuang:!1,initcards:!1,onRoomDissolve:{},onRoomDissolveResult:{},onRoomDisbandTimer:{},onRoomReadyInfo:{},isJiaofenAgain:!1},GameDataPDK.cards={},GameDataPDK.resultData={},console.log("call initGameData")},GameDataPDK.initCreateRoomOpts=function(){var a=cc.sys.localStorage.getItem("DDZcreateRoomOpts");null==a?(GameDataPDK.createRoomOpts={},GameDataPDK.createRoomOpts.playType=0,GameDataPDK.createRoomOpts.roundMax=10,GameDataPDK.createRoomOpts.fanshu=2,GameDataPDK.createRoomOpts.costType=1,GameDataPDK.createRoomOpts.joinermax=3,GameDataPDK.createRoomOpts.times=1,GameDataPDK.createRoomOpts.score=1,GameDataPDK.createRoomOpts.zhuangType=!0):GameDataPDK.createRoomOpts=JSON.parse(a)},GameDataPDK.saveCreateRoomOpts=function(){null!=GameDataPDK.createRoomOpts&&null!=GameDataPDK.createRoomOpts&&cc.sys.localStorage.setItem("DDZcreateRoomOpts",JSON.stringify(GameDataPDK.createRoomOpts))},GameDataPDK.getHandCardSize=function(){3==GameData.room.opts.joinermax?(GameDataPDK.handCardSize=16,GameDataPDK.handCardSizeMax=16):2==GameData.room.opts.joinermax&&(GameDataPDK.handCardSize=17,GameDataPDK.handCardSizeMax=17)},GameDataPDK.getJiaofenNum=function(a){return GameDataPDK.cards[a].jiaofenNum},GameDataPDK.getDisPoker=function(a){return GameDataPDK.cards[a].discards},GameDataPDK.getHandCards=function(a){return null==GameDataPDK.cards[a]?null:null!=GameDataPDK.cards[a].hand?GameDataPDK.cards[a].hand:null},GameDataPDK.getMyHandCards=function(){return null!=GameDataPDK.cards[GameData.player.uid]?GameDataPDK.cards[GameData.player.uid].hand:null},GameDataPDK.getHandCardNum=function(a){return null==GameDataPDK.cards[a]?null:null!=GameDataPDK.cards[a].handnum?GameDataPDK.cards[a].handnum:null},GameDataPDK.setPosition=function(){var a;GameData.tablePos={};var e=GameData.getPlayerIndex(GameData.player.uid);if(null!=GameData.room.opts){if(4==GameData.room.opts.joinermax){0==e?a=["down","right","up","left"]:1==e?a=["left","down","right","up"]:2==e?a=["up","left","down","right"]:3==e&&(a=["right","up","left","down"]);for(var t=0;t<GameData.joiners.length;t++)GameData.joiners[t]&&(GameData.tablePos[GameData.joiners[t].uid]=a[t])}else if(3==GameData.room.opts.joinermax){0==e?a=["down","right","left"]:1==e?a=["left","down","right"]:2==e&&(a=["right","left","down"]);for(t=0;t<GameData.joiners.length;t++)GameData.joiners[t]&&(GameData.tablePos[GameData.joiners[t].uid]=a[t])}else if(2==GameData.room.opts.joinermax){0==e?a=["down","right"]:1==e&&(a=["right","down"]);for(t=0;t<GameData.joiners.length;t++)GameData.joiners[t]&&(GameData.tablePos[GameData.joiners[t].uid]=a[t])}cc.log("table pos:"+JSON.stringify(GameData.tablePos))}},GameDataPDK.getPosByUid=function(a){return GameData.tablePos[a]},GameDataPDK.isEmptyObject=function(a){for(var e in a)return!1;return!0},GameDataPDK.objectLen=function(a){var e=0;for(var t in a)e++;return e},GameDataPDK.clearObject=function(a){for(var e in a)delete a[e];return!!GameDataPDK.isEmptyObject(a)};