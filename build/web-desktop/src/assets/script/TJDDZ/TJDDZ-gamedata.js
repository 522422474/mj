var GameDataTJDDZ=GameDataTJDDZ||{};function pokerTJDDZRegistMsg(){GameNet.getInstance().setCallBack("tjddz-hideCard",function(a){WriteLog("tjddz-hideCard: ",a),GameDataTJDDZ.hideDisCard=a,sendEvent("tjddz-hideCard",a)}),GameNet.getInstance().setCallBack("tjddz-onReady",function(a){WriteLog("tjddz-onReady: ",a),sendEvent("tjddz-onReady",a)}),GameNet.getInstance().setCallBack("tjddz-startChuai",function(a){WriteLog("do event tjddz-startChuai  "+JSON.stringify(a)),GameDataTJDDZ.chuaiFlag=!0,sendEvent("tjddz-startChuai",a)}),GameNet.getInstance().setCallBack("tjddz-startTi",function(a){WriteLog("do event tjddz-startTi  "+JSON.stringify(a)),GameDataTJDDZ.tiFlag=!0,sendEvent("tjddz-startTi",a)}),GameNet.getInstance().setCallBack("tjddz-showKicking",function(a){WriteLog("do event tjddz-showKicking  "+JSON.stringify(a)),GameDataTJDDZ.kicking=a,sendEvent("tjddz-showKicking",a)}),GameNet.getInstance().setCallBack("tjddz-onGameInfo",function(a){WriteLog("do event tjddz-onGameInfo  "+JSON.stringify(a)),GameDataTJDDZ.game.initcards=!0,GameDataTJDDZ.deal=!1,sendEvent("tjddz-onGameInfo",a)}),GameNet.getInstance().setCallBack("tjddz-initCardHandNum",function(a){WriteLog("do event tjddz-initCardHandNum  "+JSON.stringify(a)),GameDataTJDDZ.cards[a.uid]=void 0===GameDataTJDDZ.cards[a.uid]?{}:GameDataTJDDZ.cards[a.uid],GameDataTJDDZ.cards[a.uid].handnum=a.num,sendEvent("tjddz-initCardHandNum")}),GameNet.getInstance().setCallBack("tjddz-initCardHand",function(a){WriteLog("do event tjddz-initCardHand  "+JSON.stringify(a)),GameDataTJDDZ.cards[a.uid]=void 0===GameDataTJDDZ.cards[a.uid]?{}:GameDataTJDDZ.cards[a.uid],GameDataTJDDZ.cards[a.uid].hand=a.hand,sendEvent("tjddz-initCardHand")}),GameNet.getInstance().setCallBack("tjddz-onGameStart",function(a){WriteLog("do event tjddz-onGameStart  "+JSON.stringify(a)),GameDataTJDDZ.initGameData(),GameDataTJDDZ.game.gameStart=!0,GameDataTJDDZ.deal=!0,sendEvent("tjddz-onGameStart")}),GameNet.getInstance().setCallBack("tjddz-onGameScore",function(a){WriteLog("do event tjddz-onGameScore  "+JSON.stringify(a)),GameDataTJDDZ.resultData=a,GameDataTJDDZ.game.gameStart=!1,GameDataTJDDZ.tiFlag=!1,GameDataTJDDZ.chuaiFlag=!1,sendEvent("tjddz-onGameScore",a)}),GameNet.getInstance().setCallBack("tjddz-onGameAllScore",function(a){WriteLog("do event tjddz-onGameAllScore  "+JSON.stringify(a)),GameDataTJDDZ.allScores=a.score,GameDataTJDDZ.roomsummaryData=a,sendEvent("tjddz-onGameAllScore",a)}),GameNet.getInstance().setCallBack("tjddz-onFirstJiaoFen",function(a){WriteLog("sercerMsg  tjddz-onFirstJiaoFen :"+JSON.stringify(a)),GameDataTJDDZ.game.isJiaofenAgain=a.flag,GameDataTJDDZ.currJiaofenPlayerData=a,sendEvent("tjddz-onJiaoFen",a)}),GameNet.getInstance().setCallBack("tjddz-showWatch",function(a){WriteLog("sercerMsg  tjddz-showWatch :"+JSON.stringify(a)),GameDataTJDDZ.currtiChuaiPlayerData=a,sendEvent("tjddz-showWatch",a)}),GameNet.getInstance().setCallBack("tjddz-nextJiaoFen",function(a){for(var t in WriteLog("sercerMsg  tjddz-nextJiaoFen :"+JSON.stringify(a)),a.allJiaoFen)GameDataTJDDZ.cards[t].jiaofenNum=a.allJiaoFen[t];GameDataTJDDZ.currJiaofenPlayerData=a,sendEvent("tjddz-onJiaoFen",a)}),GameNet.getInstance().setCallBack("tjddz-reconnectionInfo",function(a){if(WriteLog("sercerMsg  tjddz-reconnectionInfo :"+JSON.stringify(a)),"jiaofen"==a.type)for(var t in(GameDataTJDDZ.currJiaofenPlayerData=a).allJiaoFen)GameDataTJDDZ.cards[t].jiaofenNum=a.allJiaoFen[t];sendEvent("tjddz-reconnectionInfo")}),GameNet.getInstance().setCallBack("tjddz-openScore",function(a){WriteLog("do event tjddz-openScore  "+JSON.stringify(a)),GameDataTJDDZ.openScore=a.open,sendEvent("tjddz-openScore",a)}),GameNet.getInstance().setCallBack("tjddz-onDiZhu",function(a){WriteLog("sercerMsg  tjddz-onDiZhu  :"+JSON.stringify(a)),GameDataTJDDZ.game.dizhuUid=a.dizhuUid,GameDataTJDDZ.gameStartData=a,GameDataTJDDZ.game.gameStartDizhu=!0,sendEvent("tjddz-onDiZhu",a)}),GameNet.getInstance().setCallBack("tjddz-disCardUid",function(a){WriteLog("sercerMsg  tjddz-disCardUid  :"+JSON.stringify(a)),GameDataTJDDZ.currObtainPlayerData=a,sendEvent("tjddz-onShowObtainNode",a)}),GameNet.getInstance().setCallBack("tjddz-initCardHandNums",function(a){WriteLog("do event tjddz-initCardHandNums  "+JSON.stringify(a)),GameDataTJDDZ.cards[a.uid].handnum=a.num,cc.log("initCardHandNums"+JSON.stringify(GameDataTJDDZ.cards[a.uid])),sendEvent("tjddz-initCardHandNums")}),GameNet.getInstance().setCallBack("tjddz-showDisPoker",function(a){WriteLog("sercerMsg  tjddz-showDisPoker  :"+JSON.stringify(a)),GameDataTJDDZ.cards[a.uid]=void 0===GameDataTJDDZ.cards[a.uid]?{}:GameDataTJDDZ.cards[a.uid],GameDataTJDDZ.cards[a.uid].discards=a.cards,GameDataTJDDZ.connectDisCard[a.uid]=a.cards,sendEvent("tjddz-showDisPoker",a)}),GameNet.getInstance().setCallBack("tjddz-initCardHands",function(a){WriteLog("do event tjddz-initCardHands  "+JSON.stringify(a)),GameDataTJDDZ.cards[a.uid]=void 0===GameDataTJDDZ.cards[a.uid]?{}:GameDataTJDDZ.cards[a.uid],GameDataTJDDZ.cards[a.uid].hand=a.hand,sendEvent("tjddz-initCardHands",a)}),GameNet.getInstance().setCallBack("tjddz-cardWarning",function(a){WriteLog("do event tjddz-cardWarning  "+JSON.stringify(a)),sendEvent("tjddz-cardWarning",a)}),GameNet.getInstance().setCallBack("tjddz-onDiscardType",function(a){WriteLog("do event tjddz-onDiscardType  "+JSON.stringify(a)),GameDataTJDDZ.lastDisPokerUid=a.uid,sendEvent("tjddz-onDiscardType",a)}),GameNet.getInstance().setCallBack("tjddz-jiaoFencb",function(a){WriteLog("do event tjddz-jiaoFencb  "+JSON.stringify(a)),sendEvent("tjddz-jiaoFencb",a)}),GameNet.getInstance().setCallBack("tjddz-passcb",function(a){WriteLog("do event tjddz-passcb  "+JSON.stringify(a)),GameDataTJDDZ.cards[a.uid].discards=a.cards,GameDataTJDDZ.cards[a.nextUid].discards=a.nextCards,sendEvent("tjddz-passcb",a)}),GameNet.getInstance().setCallBack("tjddz-hintCard",function(a){WriteLog("do event tjddz-hintCard  "+JSON.stringify(a)),sendEvent("tjddz-hintCard",a)}),GameNet.getInstance().setCallBack("tjddz-BackTable",function(a){WriteLog("do event tjddz-BackTable  "+JSON.stringify(a)),GameDataTJDDZ.game.initcards=!0})}GameDataTJDDZ.init=function(){GameDataTJDDZ.initCreateRoomOpts(),GameDataTJDDZ.initRoomData(),pokerTJDDZRegistMsg()},GameDataTJDDZ.initRoomData=function(){GameDataTJDDZ.log="",GameDataTJDDZ.room={},GameDataTJDDZ.allScores={},GameDataTJDDZ.roomsummaryData={},GameDataTJDDZ.openScore=0,GameDataTJDDZ.recordInfo=[],GameDataTJDDZ.currJiaofenPlayerData={},GameDataTJDDZ.gameStartData={},GameDataTJDDZ.currObtainPlayerData={},GameDataTJDDZ.lastDisPokerUid=0,GameDataTJDDZ.hideDisCard={},GameDataTJDDZ.deal=!1,GameDataTJDDZ.tiFlag=!1,GameDataTJDDZ.chuaiFlag=!1,GameDataTJDDZ.kicking={},GameDataTJDDZ.currtiChuaiPlayerData=[],GameDataTJDDZ.connectDisCard={},GameDataTJDDZ.initGameData(),console.log("call initRoomData")},GameDataTJDDZ.initGameData=function(){GameDataTJDDZ.handCardSize=17,GameDataTJDDZ.handCardSizeMax=20,GameDataTJDDZ.game={roundType:0,roundNum:0,roundmax:0,turn:0,lastdisUid:0,lastdisCard:0,winnerUid:0,dizhuUid:0,gangOver:0,gameStart:!1,gameStartDizhu:!1,initcards:!1,onRoomDissolve:{},onRoomDissolveResult:{},onRoomDisbandTimer:{},onRoomReadyInfo:{},isJiaofenAgain:!1},GameDataTJDDZ.cards={},GameDataTJDDZ.resultData={},console.log("call initGameData")},GameDataTJDDZ.initCreateRoomOpts=function(){var a=cc.sys.localStorage.getItem("DDZcreateRoomOpts");null==a?(GameDataTJDDZ.createRoomOpts={},GameDataTJDDZ.createRoomOpts.playType=0,GameDataTJDDZ.createRoomOpts.roundType=1,GameDataTJDDZ.createRoomOpts.roundMax=6,GameDataTJDDZ.createRoomOpts.fanshu=2,GameDataTJDDZ.createRoomOpts.costType=1,GameDataTJDDZ.createRoomOpts.jiaofenType=1,GameDataTJDDZ.createRoomOpts.mud=!1,GameDataTJDDZ.createRoomOpts.kicking=!1,GameDataTJDDZ.createRoomOpts.times=1,GameDataTJDDZ.createRoomOpts.score=1):GameDataTJDDZ.createRoomOpts=JSON.parse(a)},GameDataTJDDZ.saveCreateRoomOpts=function(){null!=GameDataTJDDZ.createRoomOpts&&null!=GameDataTJDDZ.createRoomOpts&&cc.sys.localStorage.setItem("DDZcreateRoomOpts",JSON.stringify(GameDataTJDDZ.createRoomOpts))},GameDataTJDDZ.getJiaofenNum=function(a){return GameDataTJDDZ.cards[a].jiaofenNum},GameDataTJDDZ.getDisPoker=function(a){return GameDataTJDDZ.cards[a].discards},GameDataTJDDZ.getHandCards=function(a){return GameDataTJDDZ.cards[a].hand},GameDataTJDDZ.getMyHandCards=function(){if(null!=GameDataTJDDZ.cards[GameData.player.uid])return GameDataTJDDZ.cards[GameData.player.uid].hand},GameDataTJDDZ.getHandCardNum=function(a){return GameDataTJDDZ.cards[a].handnum},GameDataTJDDZ.setPosition=function(){var a;GameData.tablePos={};var t=GameData.getPlayerIndex(GameData.player.uid);if(null!=GameData.room.opts){if(4==GameData.room.opts.joinermax){0==t?a=["down","right","up","left"]:1==t?a=["left","down","right","up"]:2==t?a=["up","left","down","right"]:3==t&&(a=["right","up","left","down"]);for(var e=0;e<GameData.joiners.length;e++)GameData.joiners[e]&&(GameData.tablePos[GameData.joiners[e].uid]=a[e])}else if(3==GameData.room.opts.joinermax){0==t?a=["down","right","left"]:1==t?a=["left","down","right"]:2==t&&(a=["right","left","down"]);for(e=0;e<GameData.joiners.length;e++)GameData.joiners[e]&&(GameData.tablePos[GameData.joiners[e].uid]=a[e])}else if(2==GameData.room.opts.joinermax){0==t?a=["down","up"]:1==t&&(a=["up","down"]);for(e=0;e<GameData.joiners.length;e++)GameData.joiners[e]&&(GameData.tablePos[GameData.joiners[e].uid]=a[e])}cc.log("table pos:"+JSON.stringify(GameData.tablePos))}},GameDataTJDDZ.getPosByUid=function(a){return GameData.tablePos[a]},GameDataTJDDZ.isEmptyObject=function(a){for(var t in a)return!1;return!0},GameDataTJDDZ.objectLen=function(a){var t=0;for(var e in a)t++;return t},GameDataTJDDZ.clearObject=function(a){for(var t in a)delete a[t];return!!GameDataTJDDZ.isEmptyObject(a)};