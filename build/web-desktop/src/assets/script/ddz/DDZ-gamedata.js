var GameDataDDZ=GameDataDDZ||{};function pokerDDZRegistMsg(){GameNet.getInstance().setCallBack("ddz-onGameInfo",function(a){GameDataDDZ.game.initcards=!0,GameDataDDZ.deal=!1,sendEvent("ddz-onGameInfo",a)}),GameNet.getInstance().setCallBack("ddz-initCardHandNum",function(a){GameDataDDZ.cards[a.uid]=void 0===GameDataDDZ.cards[a.uid]?{}:GameDataDDZ.cards[a.uid],GameDataDDZ.cards[a.uid].handnum=a.num,sendEvent("ddz-initCardHandNum")}),GameNet.getInstance().setCallBack("ddz-initCardHand",function(a){GameDataDDZ.cards[a.uid]=void 0===GameDataDDZ.cards[a.uid]?{}:GameDataDDZ.cards[a.uid],GameDataDDZ.cards[a.uid].hand=a.hand,sendEvent("ddz-initCardHand")}),GameNet.getInstance().setCallBack("ddz-onReady",function(a){sendEvent("ddz-onReady")}),GameNet.getInstance().setCallBack("ddz-onGameStart",function(a){GameDataDDZ.initGameData(),GameDataDDZ.game.gameStart=!0,GameDataDDZ.deal=!0,sendEvent("ddz-onGameStart")}),GameNet.getInstance().setCallBack("ddz-deputeInfo",function(a){GameDataDDZ.deputeInfo=a.deputeInfo,sendEvent("ddz-deputeInfo")}),GameNet.getInstance().setCallBack("ddz-startChuai",function(a){GameDataDDZ.tiFlag=!0,sendEvent("ddz-startTi",a)}),GameNet.getInstance().setCallBack("ddz-startTi",function(a){GameDataDDZ.tiFlag=!0,sendEvent("ddz-startTi",a)}),GameNet.getInstance().setCallBack("ddz-showWatch",function(a){GameDataDDZ.curWatchData=a,sendEvent("ddz-showWatch",a)}),GameNet.getInstance().setCallBack("ddz-showKicking",function(a){GameDataDDZ.kicking=a,sendEvent("ddz-showKicking",a)}),GameNet.getInstance().setCallBack("ddz-onGameScore",function(a){GameDataDDZ.resultData=a,GameDataDDZ.game.gameStart=!1,GameDataDDZ.tiFlag=!1,sendEvent("ddz-onGameScore",a)}),GameNet.getInstance().setCallBack("ddz-onGameAllScore",function(a){GameDataDDZ.allScores=a.score,GameDataDDZ.roomsummaryData=a,sendEvent("ddz-onGameAllScore",a)}),GameNet.getInstance().setCallBack("ddz-onFirstJiaoFen",function(a){GameDataDDZ.game.isJiaofenAgain=a.flag,GameDataDDZ.currJiaofenPlayerData=a,sendEvent("ddz-onJiaoFen",a)}),GameNet.getInstance().setCallBack("ddz-nextJiaoFen",function(a){for(var e in a.allJiaoFen)GameDataDDZ.cards[e].jiaofenNum=a.allJiaoFen[e];GameDataDDZ.currJiaofenPlayerData=a,sendEvent("ddz-onJiaoFen",a)}),GameNet.getInstance().setCallBack("ddz-reconnectionInfo",function(a){if("jiaofen"==a.type)for(var e in(GameDataDDZ.currJiaofenPlayerData=a).allJiaoFen)GameDataDDZ.cards[e].jiaofenNum=a.allJiaoFen[e];sendEvent("ddz-reconnectionInfo")}),GameNet.getInstance().setCallBack("ddz-onDiZhu",function(a){GameDataDDZ.game.dizhuUid=a.dizhuUid,GameDataDDZ.game.flag=a.flag,GameDataDDZ.gameStartData=a,GameDataDDZ.game.gameStartDizhu=!0,sendEvent("ddz-onDiZhu",a)}),GameNet.getInstance().setCallBack("ddz-disCardUid",function(a){GameDataDDZ.currObtainPlayerData=a,sendEvent("ddz-onShowObtainNode",a)}),GameNet.getInstance().setCallBack("ddz-showDisPoker",function(a){GameDataDDZ.cards[a.uid]=void 0===GameDataDDZ.cards[a.uid]?{}:GameDataDDZ.cards[a.uid],GameDataDDZ.cards[a.uid].discards=a.cards,GameDataDDZ.connectDisCard[a.uid]=a.cards,sendEvent("ddz-showDisPoker",a)}),GameNet.getInstance().setCallBack("ddz-initCardHands",function(a){GameDataDDZ.cards[a.uid]=void 0===GameDataDDZ.cards[a.uid]?{}:GameDataDDZ.cards[a.uid],GameDataDDZ.cards[a.uid].hand=a.hand,sendEvent("ddz-initCardHands",a)}),GameNet.getInstance().setCallBack("ddz-onDiscardType",function(a){GameDataDDZ.lastDisPokerUid=a.uid,sendEvent("ddz-onDiscardType",a)}),GameNet.getInstance().setCallBack("ddz-jiaoFencb",function(a){3==a.num&&(void 0===GameDataDDZ.cards[a.uid]&&(GameDataDDZ.cards[a.uid]={}),GameDataDDZ.cards[a.uid].jiaofenNum=3),sendEvent("ddz-jiaoFencb",a)}),GameNet.getInstance().setCallBack("ddz-passcb",function(a){GameDataDDZ.cards[a.uid].discards=a.cards,GameDataDDZ.cards[a.nextUid].discards=a.nextCards,sendEvent("ddz-passcb",a)}),GameNet.getInstance().setCallBack("ddz-hintCard",function(a){sendEvent("ddz-hintCard",a)}),GameNet.getInstance().setCallBack("ddz-BackTable",function(a){GameDataDDZ.game.initcards=!0})}GameDataDDZ.init=function(){GameDataDDZ.initCreateRoomOpts(),GameDataDDZ.initRoomData(),pokerDDZRegistMsg()},GameDataDDZ.initRoomData=function(){GameDataDDZ.log="",GameDataDDZ.room={},GameDataDDZ.allScores={},GameDataDDZ.roomsummaryData={},GameDataDDZ.recordInfo=[],GameDataDDZ.currJiaofenPlayerData={},GameDataDDZ.gameStartData={},GameDataDDZ.currObtainPlayerData={},GameDataDDZ.lastDisPokerUid=0,GameDataDDZ.connectDisCard={},GameDataDDZ.tiFlag=!1,GameDataDDZ.deal=!1,GameDataDDZ.curWatchData={},GameDataDDZ.kicking={},GameDataDDZ.deputeInfo={},GameDataDDZ.initGameData(),GameDataDDZ.roomStatus={JIAOFEN:4,TICHUAI:5}},GameDataDDZ.initGameData=function(){GameDataDDZ.handCardSize=17,GameDataDDZ.game={roundType:0,roundNum:0,roundmax:0,turn:0,lastdisUid:0,lastdisCard:0,winnerUid:0,dizhuUid:0,gangOver:0,gameStart:!1,gameStartDizhu:!1,initcards:!1,onRoomDissolve:{},onRoomDissolveResult:{},onRoomDisbandTimer:{},onRoomReadyInfo:{},isJiaofenAgain:!1},GameDataDDZ.cards={},GameDataDDZ.resultData={}},GameDataDDZ.initCreateRoomOpts=function(){var a=cc.sys.localStorage.getItem("DDZcreateRoomOpts");null==a?(GameDataDDZ.createRoomOpts={},GameDataDDZ.createRoomOpts.playType=0,GameDataDDZ.createRoomOpts.roundType=1,GameDataDDZ.createRoomOpts.roundMax=6,GameDataDDZ.createRoomOpts.fanshu=2,GameDataDDZ.createRoomOpts.costType=1,GameDataDDZ.createRoomOpts.times=1,GameDataDDZ.createRoomOpts.score=1,GameDataDDZ.createRoomOpts.jiaofenType=1,GameDataDDZ.createRoomOpts.fullMark=!0,GameDataDDZ.createRoomOpts.suppress=!0,GameDataDDZ.createRoomOpts.detain=0,GameDataDDZ.createRoomOpts.kicking=!0,GameDataDDZ.createRoomOpts.fourFlag=!0):GameDataDDZ.createRoomOpts=JSON.parse(a)},GameDataDDZ.saveCreateRoomOpts=function(){null!=GameDataDDZ.createRoomOpts&&null!=GameDataDDZ.createRoomOpts&&cc.sys.localStorage.setItem("DDZcreateRoomOpts",JSON.stringify(GameDataDDZ.createRoomOpts))},GameDataDDZ.getJiaofenNum=function(a){return void 0===GameDataDDZ.cards[a]&&(GameDataDDZ.cards[a]={}),GameDataDDZ.cards[a].jiaofenNum},GameDataDDZ.getDisPoker=function(a){return void 0===GameDataDDZ.cards[a]&&(GameDataDDZ.cards[a]={}),GameDataDDZ.cards[a].discards},GameDataDDZ.getHandCards=function(a){return void 0===GameDataDDZ.cards[a]&&(GameDataDDZ.cards[a]={}),GameDataDDZ.cards[a].hand},GameDataDDZ.getMyHandCards=function(){return void 0===GameDataDDZ.cards[GameData.player.uid]&&(GameDataDDZ.cards[GameData.player.uid]={}),GameDataDDZ.cards[GameData.player.uid].hand},GameDataDDZ.getHandCardNum=function(a){return void 0===GameDataDDZ.cards[a]&&(GameDataDDZ.cards[a]={}),GameDataDDZ.cards[a].handnum},GameDataDDZ.setPosition=function(){var a;GameData.tablePos={};var e=GameData.getPlayerIndex(GameData.player.uid);if(null!=GameData.room.opts){if(4==GameData.room.opts.joinermax){0==e?a=["down","right","up","left"]:1==e?a=["left","down","right","up"]:2==e?a=["up","left","down","right"]:3==e&&(a=["right","up","left","down"]);for(var t=0;t<GameData.joiners.length;t++)GameData.joiners[t]&&(GameData.tablePos[GameData.joiners[t].uid]=a[t])}else if(3==GameData.room.opts.joinermax){0==e?a=["down","right","left"]:1==e?a=["left","down","right"]:2==e&&(a=["right","left","down"]);for(t=0;t<GameData.joiners.length;t++)GameData.joiners[t]&&(GameData.tablePos[GameData.joiners[t].uid]=a[t])}else if(2==GameData.room.opts.joinermax){0==e?a=["down","up"]:1==e&&(a=["up","down"]);for(t=0;t<GameData.joiners.length;t++)GameData.joiners[t]&&(GameData.tablePos[GameData.joiners[t].uid]=a[t])}cc.log("table pos:"+JSON.stringify(GameData.tablePos))}},GameDataDDZ.getPosByUid=function(a){return GameData.tablePos[a]},GameDataDDZ.isEmptyObject=function(a){for(var e in a)return!1;return!0},GameDataDDZ.clearObject=function(a){for(var e in a)delete a[e];return!!GameDataDDZ.isEmptyObject(a)},GameDataDDZ.objectLen=function(a){var e=0;for(var t in a)e++;return e};